{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./public/img/bpl-logo.png","webpack:///./src/server/middleware/renderer.js","webpack:///./src/server/server.js","webpack:///./src/shared/App.js","webpack:///./src/shared/CalculatorScreen/BplPrice.js","webpack:///./src/shared/CalculatorScreen/CalculatorScreen.js","webpack:///./src/shared/CalculatorScreen/DelegateStake.js","webpack:///./src/shared/DelegateScreen/DelegateActivity.js","webpack:///./src/shared/DelegateScreen/DelegateInfo.js","webpack:///./src/shared/DelegateScreen/DelegateScreen.js","webpack:///./src/shared/RoundScreen/NetworkStatus.js","webpack:///./src/shared/RoundScreen/RoundProgress.js","webpack:///./src/shared/RoundScreen/RoundScreen.js","webpack:///./src/shared/RoundScreen/RoundSlots.js","webpack:///./src/shared/RoundScreen/RoundStatus.js","webpack:///./src/shared/domain/api/NodeApi.js","webpack:///./src/shared/domain/util/format.js","webpack:///./src/shared/domain/util/logger.js","webpack:///./src/shared/domain/util/sorters.js","webpack:///./src/shared/domain/util/time.js","webpack:///./src/shared/stores/BlockStore.js","webpack:///./src/shared/stores/DelegateStore.js","webpack:///./src/shared/stores/NetworkStore.js","webpack:///./src/shared/stores/PriceStore.js","webpack:///./src/shared/stores/RoundStore.js","webpack:///./src/shared/stores/SlotStore.js","webpack:///./src/shared/stores/slotFactory.js","webpack:///external \"@babel/polyfill\"","webpack:///external \"@material-ui/core\"","webpack:///external \"@material-ui/core/colors/green\"","webpack:///external \"@material-ui/core/colors/red\"","webpack:///external \"@material-ui/core/styles\"","webpack:///external \"@material-ui/icons/Announcement\"","webpack:///external \"@material-ui/icons/CheckCircle\"","webpack:///external \"@material-ui/icons/Update\"","webpack:///external \"big-js\"","webpack:///external \"cors\"","webpack:///external \"express\"","webpack:///external \"fs\"","webpack:///external \"javascript-time-ago\"","webpack:///external \"javascript-time-ago/locale/en\"","webpack:///external \"mobx\"","webpack:///external \"mobx-react\"","webpack:///external \"mobx-task\"","webpack:///external \"node-fetch\"","webpack:///external \"path\"","webpack:///external \"querystring\"","webpack:///external \"react\"","webpack:///external \"react-dom/server\"","webpack:///external \"react-jss/lib/JssProvider\"","webpack:///external \"react-jss/lib/jss\"","webpack:///external \"react-router-dom\""],"names":["renderFullPage","html","css","Promise","resolve","reject","filePath","__dirname","err","page","replace","req","res","sheetsRegistry","SheetsRegistry","console","log","url","theme","palette","primary","green","accent","red","type","generateClassName","nodeApi","NodeApi","priceStore","PriceStore","delegateStore","DelegateStore","networkStore","NetworkStore","roundStore","RoundStore","blockStore","BlockStore","slotStore","SlotStore","stores","Map","toString","runner","pageHtml","send","status","end","app","use","get","renderer","express","static","listen","styles","content","marginTop","padding","minHeight","flex","menuButton","marginLeft","marginRight","App","classes","props","logo","height","verticalAlign","RoundScreen","DelegateScreen","CalculatorScreen","Component","BplPrice","handleCurrencyChange","evt","setCurrency","target","value","price","name","id","DelegateActivity","activeDelegate","rewardBlockPagination","items","map","b","timestamp","reward","totalFee","totalForged","totalCount","pageSize","pageNumber","DelegateInfo","vote","voters","v","address","username","balance","match","setActiveDelegate","params","pending","rejected","message","resolved","NetworkStatus","networkHeight","seedStatus","ok","total","seedNodes","n","server","RoundProgress","remainingSlotCount","successfulForgeCount","missedBlockCount","hasNewRound","newRound","roundNumber","missedBlockAvatar","backgroundColor","error","main","successfulBlockAvatar","Slot","key","hasBeenCompleted","hasMissedBlock","rest","diff","className","component","AnnouncementIcon","Forged","CheckCircle","toFixed","UpdateIcon","slot","rank","Number","toLocaleString","Date","RoundSlots","init","slots","forger","lastProcessedBlockHeight","startHeight","endHeight","makeApiRequest","query","qs","stringify","requestUrl","method","rawResponse","json","response","success","Error","apiServer","getUrl","offset","limit","generatorPublicKey","senderId","recipientId","path","alternateServer","publicKey","TimeAgo","locale","en","timeAgo","fromApiString","bplString","div","big","digits","toFixedLocale","toHowLong","format","apply","Array","prototype","slice","call","arguments","byAscending","prop","a","byDescending","blockInterval","epochTimeUtc","UTC","epochSeconds","Math","floor","currentMsTimestamp","now","fromApiToMs","apiTimestamp","getApiTimestamp","currentSeconds","nextMsTimestamp","msTimestamp","getTimestamp","blockListener","unprocessedBlocks","resume","setInterval","listenForNewBlocks","suspend","clearInterval","initialBlockHeight","hasLoadedNewBlocks","hasNextBlock","getBlocks","blocks","newBlocks","filter","length","forEach","set","size","next","nextBlockHeight","has","computed","observable","action","nextBlock","Paginator","allItems","pageStartIndex","pageEndIndex","addressToPublicKey","delegates","isInitialized","getActiveDelegates","d","delegate","getRewardBlocks","rewardBlocks","getVoters","transformedBlocks","totalAmount","count","accounts","hasLoadedDelegates","task","i","getSyncStatus","push","seedNodeStatus","reduce","maxHeight","node","priceInterval","priceUrl","currency","listener","prices","USD","EUR","fetchPrice","priceResponse","priceResult","getCurrentRound","currentRound","delegateActivity","initialHeight","slotValue","fromBlock","completedSlots","hasCompletedSlotsForRound","isAwaitingBlock","isAwaitingSlot","roundSlots","slotInProcess","upcomingSlots","unprocessedSlots","result","watchForNextBlock","watchForUnprocessedSlot","completed","upcoming","s","processReceivedBlock","totalSlot","blockSlots","all","hasFoundProcessedSlot","completedSlot","block","totalSlotCount","roundSlot","getRoundSlot","matchingDelegate","lastSlot","additionalSlots","concat","hasUnprocessedSlots","processNextSlot","shift","nextSlot","nextUnprocessedSlot","hasLeftUpcoming","shouldBeVisible","setTimeout","unshift","sum","plus","hasSlotInProcess","slotJoinedCompleted","slotLeftUpcoming","totalForgedAmount","createSlotFromBlock","blockProps","completedSlotFromDelegate","basicSlot","number","rate","getSlotsFromInitialData","lastTimestamp","newSlot","expectedForgers","newslot","blockRoundSlot","sort"],"mappings":"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","file":"server.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","module.exports = __webpack_public_path__ + \"static/media/bpl-logo.8b1be392.png\";","import React from 'react'\nimport { readFile } from 'fs'\nimport { resolve as resolvePath } from 'path'\nimport { Provider as MobxProvider } from 'mobx-react'\nimport { renderToString } from 'react-dom/server'\nimport { SheetsRegistry } from 'react-jss/lib/jss'\nimport JssProvider from 'react-jss/lib/JssProvider'\nimport { StaticRouter } from 'react-router-dom'\nimport { MuiThemeProvider, createMuiTheme, createGenerateClassName, } from '@material-ui/core/styles'\nimport green from '@material-ui/core/colors/green'\nimport red from '@material-ui/core/colors/red'\n\nimport App from '../../shared/App'\nimport BlockStore from '../../shared/stores/BlockStore'\nimport DelegateStore from '../../shared/stores/DelegateStore'\nimport NodeApi from '../../shared/domain/api/NodeApi'\nimport PriceStore from '../../shared/stores/PriceStore'\nimport RoundStore from '../../shared/stores/RoundStore'\nimport SlotStore from '../../shared/stores/SlotStore'\nimport NetworkStore from '../../shared/stores/NetworkStore';\n\n\nconst renderFullPage = async (html, css) => \n  new Promise((resolve, reject) => {\n    const filePath = resolvePath(__dirname, '..', '..', '..', 'public', 'index.html')\n  \n    readFile(filePath, 'utf8', (err, page) => {\n      if (err) {\n        return reject(err)\n      }\n\n      resolve(page.replace(\n        '<div id=\"root\"></div>',\n        `<div id=\"root\">${html}</div>`\n      ).replace(\n        '<style id=\"jss-server-side\"></style>',\n        `<style id=\"jss-server-side\">${css}</style>`\n      ))\n    })\n  })\n\n\nexport default (req, res) => {\n  // Create a sheetsRegistry instance.\n  const sheetsRegistry = new SheetsRegistry()\n\n  console.log(`Serving ${req.url}`)\n\n  // Create a theme instance.\n  const theme = createMuiTheme({\n    palette: {\n      primary: green,\n      accent: red,\n      type: 'light',\n    },\n  })\n\n  const generateClassName = createGenerateClassName()\n  const nodeApi = new NodeApi()\n  const priceStore = new PriceStore()\n  const delegateStore = new DelegateStore(nodeApi)\n  const networkStore = new NetworkStore(nodeApi)\n  const roundStore = new RoundStore(nodeApi)\n  const blockStore = new BlockStore(nodeApi, roundStore)\n  const slotStore = new SlotStore(blockStore, delegateStore, roundStore)\n  \n  const stores = {\n    blockStore,\n    delegateStore,\n    networkStore,\n    priceStore,\n    roundStore,\n    slotStore,\n  }\n\n  // Render the component to a string.\n  const html = renderToString(\n    <JssProvider registry={sheetsRegistry} generateClassName={generateClassName}>\n      <MuiThemeProvider theme={theme} sheetsManager={new Map()}>\n        <MobxProvider {... stores}>\n          <StaticRouter location={req.url} context={{}}>\n            <App />\n          </StaticRouter>\n        </MobxProvider>\n      </MuiThemeProvider>\n    </JssProvider>\n  )\n\n  // Grab the CSS from our sheetsRegistry.\n  const css = sheetsRegistry.toString()\n\n  const runner = async () => {\n    try {\n      const pageHtml = await renderFullPage(html, css)\n      res.send(pageHtml)\n    } catch (ex) {\n      console.log(`Error in server: ${ex}`)\n      res.status(500).end()\n    }\n  }\n  runner()\n}\n","import express from 'express'\nimport cors from 'cors'\n\nimport renderer from './middleware/renderer'\n\n\nconst app = express()\n\napp.use(cors())\n\napp.get('^/$', renderer)\n\napp.use(express.static('public'))\n\napp.get('*', renderer)\n\napp.listen(3000, () => {\n  console.log(`Server is listening on port: 3000`)\n})\n","import React, { Component } from 'react'\nimport {\n  AppBar,\n  CssBaseline,\n  Hidden,\n  Toolbar,\n  Typography,\n  withStyles,\n} from '@material-ui/core'\nimport { Link, Route, Switch } from 'react-router-dom'\n\nimport logo from '../../public/img/bpl-logo.png'\nimport CalculatorScreen from './CalculatorScreen/CalculatorScreen'\nimport DelegateScreen from './DelegateScreen/DelegateScreen'\nimport RoundScreen from './RoundScreen/RoundScreen'\n\n\nconst styles = theme => ({\n  content: {\n    marginTop: \"70px\",\n    padding: \"30px 15px\",\n    minHeight: \"calc(100% - 123px)\"\n  },\n  flex: {\n    flex: 1,\n  },\n  menuButton: {\n    marginLeft: -12,\n    marginRight: 20,\n  },\n});\n\n\nclass App extends Component {\n  render() {\n    const { classes } = this.props\n\n    return (\n      <React.Fragment>\n        <CssBaseline />\n        <AppBar position=\"fixed\">\n          <Toolbar>\n            <Typography\n              variant=\"title\"\n              color=\"inherit\"\n              className={classes.flex}\n            >\n              <img\n                src={logo}\n                alt=\"BPL logo\"\n                style={{ height: '1.16667em', verticalAlign: 'bottom' }}\n              />\n              <span style={{ marginLeft: '15px' }}>\n                <Link to=\"/\">BPL Delegate Explorer</Link>\n              </span>\n            </Typography>\n\n            <Link to=\"/calculator\">Calculator</Link>\n            <Hidden smDown>\n              <Typography color=\"inherit\" />\n            </Hidden>\n          </Toolbar>\n        </AppBar>\n\n        <div className={classes.content}>\n          <Switch>\n            <Route path=\"/\" exact component={RoundScreen} />\n            <Route path=\"/delegate/:address\" component={DelegateScreen} />\n            <Route path=\"/calculator\" exact component={CalculatorScreen} />\n          </Switch>\n        </div>\n      </React.Fragment>\n    )\n  }\n}\n\nexport default withStyles(styles)(App)\n","import React, { Component } from 'react'\nimport { inject, observer, } from 'mobx-react'\nimport {\n  Card,\n  CardContent,\n  CardHeader,\n  FormControl,\n  InputLabel,\n  Select,\n  TextField,\n} from '@material-ui/core'\n\n\nexport class BplPrice extends Component {\n  handleCurrencyChange = (evt) => {\n    this.props.priceStore.setCurrency(evt.target.value)\n  }\n\n  render() {\n    const { priceStore } = this.props\n\n    return (\n      <Card>\n        <CardHeader title=\"BPL Price\" />\n        <CardContent>\n          <FormControl>\n            <InputLabel htmlFor=\"bpl-price\">Price</InputLabel>\n            <TextField\n              value={priceStore.price}\n              inputProps={{\n                name: 'bpl-price',\n                id: 'bpl-price',\n              }}\n            />\n          </FormControl>\n          <FormControl>\n            <InputLabel htmlFor=\"bpl-currency\">Currency</InputLabel>\n            <Select\n              native\n              defaultValue={'USD'}\n              onChange={this.handleCurrencyChange}\n              inputProps={{\n                name: 'bpl-currency',\n                id: 'bpl-currency',\n              }}\n            >\n              <option>AUD</option>\n              <option>BTC</option>\n              <option>CNY</option>\n              <option>EUR</option>\n              <option>GBP</option>\n              <option>USD</option>\n            </Select>\n          </FormControl>\n        </CardContent>\n      </Card>\n    )\n  }\n}\n\nexport default inject('priceStore')(observer(BplPrice))\n","import React, { Component } from 'react'\nimport {\n  Grid,\n} from '@material-ui/core'\n\nimport BplPrice from './BplPrice'\nimport DelegateStake from './DelegateStake'\n\nexport default class CalculatorScreen extends Component {\n  render() {\n    return (\n      <Grid container>\n        <Grid item xs={12} sm={3}>\n          <DelegateStake />\n          <BplPrice />\n        </Grid>\n      </Grid>\n    )\n  }\n}\n\n/*\n      <div class=\"row\">\n      \n      <div class=\"col-md-3\">\n\n      <div class=\"card card-nav-tabs\">\n        <div class=\"card-header card-header-rose\">\n          BPL Price\n        </div>\n        <div class=\"card-body\">\n          <div class=\"row\">\n            <div class=\"col-md-9\">\n              <input type=\"number\" id=\"bpl-price\" class=\"form-control\" />\n            </div>\n\n            <div class=\"col-md-3\">\n              <select id=\"selected-currency\" style=\"-moz-appearance: menulist; -webkit-appearance: menulist;\">\n\n              </select>\n            </div>\n          </div>\n        </div>\n\n\n        <div class=\"card-footer text-muted\">\n          <div id=\"price-loading\">Loading...</div>\n          <div id=\"price-load-date\" style=\"display: none;\">\n            As of May 2, 2018 1:09 PM\n          </div>\n          <div id=\"user-entered-price\" class=\"text-info\" style=\"display: none;\">\n            This price has been entered, it may not be the current actual price.\n            <button type=\"button\" id=\"reset-price\" class=\"btn btn-primary\">Reload Current Price</button>\n          </div>\n        </div>\n      </div>\n\n\n    </div>\n\n\n    <div class=\"col-md-9\">\n\n<div class=\"card\">\n<div class=\"card-header\">\n  <ul id=\"reward-time-period\" class=\"nav nav-pills nav-pills-rose card-header-pills\">\n    <li class=\"nav-item\">\n      <a class=\"nav-link\" id=\"reward-per-day\" data-time-period=\"day\" href=\"#\">Per Day</a>\n    </li>\n    <li class=\"nav-item\">\n      <a class=\"nav-link\" id=\"reward-per-week\" data-time-period=\"week\" href=\"#\">Per Week</a>\n    </li>\n    <li class=\"nav-item\">\n      <a class=\"nav-link active\" id=\"reward-per-month\" data-time-period=\"month\" href=\"#\">Per Month</a>\n    </li>\n    <li class=\"nav-item\">\n      <a class=\"nav-link\" id=\"reward-rest-of-year\" data-time-period=\"restOfYear\" href=\"#\">Rest of Year</a>\n    </li>\n  </ul>\n</div>\n\n<div class=\"card-body\">\n  <div class=\"row\">\n    <div class=\"col\">\n      <h2>Market Cap</h2>\n      <h3><span id=\"market-cap\"></span></h3>\n      \n      <div style=\"margin-top: 25px; position: relative;\">\n        <h2>Block Reward\n          <i class=\"material-icons\" data-toggle=\"modal\" data-target=\"#block-reward-details\">help</i>\n        </h2>\n      </div>\n      <h3><span id=\"block-reward\"></span> BPL</h3>\n\n      <div class=\"form-check\">\n        <label class=\"form-check-label\">\n          Include fixed reward\n          <input id=\"include-fixed-reward\" class=\"form-check-input\" type=\"checkbox\" value=\"\">\n          <span class=\"form-check-sign\">\n            <span class=\"check\"></span>\n          </span>\n        </label>\n      </div>              \n    </div>\n    <div class=\"col\">\n      <h2>Estimated Reward</h2>\n      <h1><span id=\"currency-value\"></span></h1>\n      <h2><span id=\"bpl-value\"></span> BPL</h2>\n    </div>\n  </div>\n\n</div>\n</div>\n\n</div>\n</div>\n\n</div>\n</div>\n\n\n<div id=\"block-reward-details\" class=\"modal\" tabindex=\"-1\" role=\"dialog\">\n<div class=\"modal-dialog\" role=\"document\">\n<div class=\"modal-content\">\n  <div class=\"modal-header\">\n    <h5 class=\"modal-title\">Block Reward Details</h5>\n    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <div class=\"modal-body\">\n    <table>\n      <tbody>\n        <tr>\n          <td class=\"reward-category\">Interest (5% of stake annually)</td>\n          <td id=\"interest-value\" class=\"bpl-amount\"></td>\n        </tr>\n        <tr>\n          <td class=\"reward-category\" >Fees (Average over the past 2 days)</td>\n          <td id=\"fees-value\" class=\"bpl-amount\"></td>\n        </tr>\n        <tr>\n          <td class=\"reward-category\">Fixed reward (Current plan, but not final)</td>\n          <td id=\"fixed-reward-value\" class=\"bpl-amount\"></td>\n        </tr>\n        <tr id=\"total-row\">\n          <td class=\"reward-category\">Total</td>\n          <td id=\"total-value\" class=\"bpl-amount\"></td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n*/\n","import React, { Component } from 'react'\nimport {\n  Card,\n  CardHeader,\n  Typography,\n  CardContent,\n  TextField,\n} from '@material-ui/core'\n\nexport default class CalculatorScreen extends Component {\n  render() {\n    return (\n      <Card>\n        <CardHeader title=\"Delegate Stake (BPL)\" />\n        <CardContent>\n          <TextField />\n          <Typography variant=\"subtitle1\">\n            Stake includes BPL held by the delegate as well as BPL from all addresses voting for the delegate.    \n          </Typography> \n        </CardContent>\n      </Card>\n    )\n  }\n}\n","import React, { Component } from 'react'\nimport { inject, observer } from 'mobx-react'\nimport { Grid,\n         Table, TableBody, TableCell, TableFooter, TableHead, TablePagination, TableRow,\n         Typography,\n      } from '@material-ui/core'\n\n\nimport { toFixed } from '../domain/util/format'\n\n\nexport class DelegateActivity extends Component {\n  render() {\n    const { delegateStore } = this.props\n\n    return (\n      <Grid container>\n        <Grid item xs={12} sm={6}>\n          <Table>\n            <TableHead>\n              <TableRow>\n                <TableCell>Height</TableCell>\n                <TableCell>Time</TableCell>\n                <TableCell numeric>Reward</TableCell>\n                <TableCell numeric>Fees</TableCell>\n                <TableCell numeric>Total</TableCell>\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              {delegateStore.activeDelegate.rewardBlockPagination.items.map(b => (\n                <TableRow key={b.id}>\n                  <TableCell>{b.height}</TableCell>\n                  <TableCell>{b.timestamp}</TableCell>\n                  <TableCell numeric>{toFixed(b.reward, 8)}</TableCell>\n                  <TableCell numeric>{toFixed(b.totalFee, 8)}</TableCell>\n                  <TableCell numeric>{toFixed(b.totalForged, 8)}</TableCell>\n                </TableRow>\n              ))}\n            </TableBody>\n            <TableFooter>\n              <TableRow>\n                <TablePagination\n                  colSpan={5}\n                  count={delegateStore.activeDelegate.rewardBlockPagination.totalCount}\n                  rowsPerPage={delegateStore.activeDelegate.rewardBlockPagination.pageSize}\n                  page={delegateStore.activeDelegate.rewardBlockPagination.pageNumber}\n                  onChangePage={evt => console.log(evt)}\n                  onChangeRowsPerPage={evt => console.log(evt)}\n                  // ActionsComponent={TablePaginationActionsWrapped}\n                />\n              </TableRow>\n            </TableFooter>\n          </Table>\n        </Grid>\n      </Grid>\n    )\n  }\n}\n\nexport default inject('delegateStore')(observer(DelegateActivity))\n\n/*\n<h5>\n{formatWithoutDigits(fromApiString(delegateStore.activeDelegate.vote))}{' '}\nBPL ({toCurrencyFormat(\n  sds.delegateCurrencyValue,\n  sds.price.currency\n)})\n</h5>\n*/\n","import React, { Component } from 'react'\nimport { inject, observer } from 'mobx-react'\nimport { Grid, Table, TableBody, TableCell, TableHead, TableRow, Typography, } from '@material-ui/core'\n\n\nimport { toFixedLocale } from '../domain/util/format'\n\n\nexport class DelegateInfo extends Component {\n  render() {\n    const { delegateStore } = this.props\n\n    return (\n      <Grid container>\n        <Grid item xs={12} sm={6}>\n          <div>\n            <h5>\n              {toFixedLocale(delegateStore.activeDelegate.vote)} BPL\n            </h5>\n          </div>\n        </Grid>\n\n        <Grid item xs={12} sm={6}>\n          <Table>\n            <TableHead>\n              <TableRow>\n                <TableCell>Voter</TableCell>\n                <TableCell numeric>BPL</TableCell>\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              {delegateStore.activeDelegate.voters.map(v => (\n                <TableRow key={v.address}>\n                  <TableCell>{v.username || v.address}</TableCell>\n                  <TableCell numeric>{toFixedLocale(v.balance)}</TableCell>\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n        </Grid>\n      </Grid>\n    )\n  }\n}\n\nexport default inject('delegateStore')(observer(DelegateInfo))\n\n/*\n<h5>\n{formatWithoutDigits(fromApiString(delegateStore.activeDelegate.vote))}{' '}\nBPL ({toCurrencyFormat(\n  sds.delegateCurrencyValue,\n  sds.price.currency\n)})\n</h5>\n*/\n","import React, { Component } from 'react'\nimport { inject, observer } from 'mobx-react'\nimport { Grid, Typography, } from '@material-ui/core'\n\n\nimport DelegateActivity from './DelegateActivity'\nimport DelegateInfo from './DelegateInfo'\n\n\nexport class DelegateScreen extends Component {\n  async componentDidMount() {\n    const { delegateStore, match } = this.props\n    delegateStore.setActiveDelegate(match.params.address)\n  }\n\n  render() {\n    const { delegateStore } = this.props\n\n    return (\n      <React.Fragment>\n        <Grid container>\n        {delegateStore.setActiveDelegate.match({\n          pending: () => <div>Loading, please wait..</div>,\n          rejected: (err) => <div>Error: {err.message}</div>,\n          resolved: () => (\n            <Grid item>\n              <Typography variant=\"headline\">\n                {`Delegate - ${delegateStore.activeDelegate.username}`}\n              </Typography>\n              <DelegateInfo />\n              <DelegateActivity />\n            </Grid>\n          )\n        })}\n        </Grid>\n      </React.Fragment>\n    )\n  }\n}\n\nexport default inject('delegateStore')(observer(DelegateScreen))\n\n/*\n        <Grid container>\n          <ItemGrid xs={12} sm={8}>\n            <RegularCard\n              cardTitle={title}\n              cardSubtitle=\"\"\n              content={\n                selectedDelegateStore.hasSelectedDelegate ? (\n                  <DelegateInfo />\n                ) : (\n                  <div>No delegate</div>\n                )\n              }\n            />\n          </ItemGrid>\n\n          <ItemGrid xs={12} sm={4}>\n            <BplPrice />\n            <EstimatedReward />\n          </ItemGrid>\n        </Grid>\n        <DelegateActivity />\n*/\n","import React, { Component } from 'react'\nimport { inject, observer, } from 'mobx-react'\nimport { Card, CardContent, Grid, Typography, } from '@material-ui/core'\n\n\nclass NetworkStatus extends Component {\n  render() {\n    const { networkStore, } = this.props\n\n    return (\n      <Card>\n        <CardContent>\n          <Grid container direction=\"column\" spacing={8}>\n            <Grid item>\n              <Typography variant=\"subtitle1\">\n                Network Height: {networkStore.networkHeight}\n              </Typography>\n            </Grid>\n            <Grid item>\n              <Typography variant=\"subtitle1\">\n                Seed Status: {`${networkStore.seedStatus.ok} / ${networkStore.seedStatus.total}`}\n              </Typography>\n\n              <ul>\n                {networkStore.seedNodes.map(n => {\n                  return (\n                    <li>\n                      {`${n.server} - ${n.height}`}\n                    </li>\n                  )\n                })}\n              </ul>\n            </Grid>\n          </Grid>\n        </CardContent>\n      </Card>\n    )\n  }\n}\n\nexport default inject('networkStore')(observer(NetworkStatus))\n","import React, { Component } from 'react'\nimport { inject, observer, } from 'mobx-react'\nimport { Card, CardContent, Grid, Typography, } from '@material-ui/core'\n\n\nclass RoundProgress extends Component {\n  render() {\n    const { slotStore, } = this.props\n\n    return (\n      <Card>\n        <CardContent>\n          <Grid container direction=\"column\" spacing={8}>\n            <Grid item>\n              <Typography variant=\"subtitle1\">\n                Remaining Slots: {slotStore.remainingSlotCount}\n              </Typography>\n            </Grid>\n            <Grid item>\n              <Typography variant=\"subtitle1\">\n                Successful Forges: {slotStore.successfulForgeCount}\n              </Typography>\n            </Grid>\n            <Grid item>\n              <Typography variant=\"subtitle1\">\n                Missed Blocks: {slotStore.missedBlockCount}\n              </Typography>\n            </Grid>\n          </Grid>\n        </CardContent>\n      </Card>\n    )\n  }\n}\n\nexport default inject('slotStore')(observer(RoundProgress))\n","import React, { Component } from 'react'\nimport { inject, observer, } from 'mobx-react'\nimport { Grid, Typography, } from '@material-ui/core'\n\nimport NetworkStatus from './NetworkStatus'\nimport RoundProgress from './RoundProgress'\nimport RoundSlots from './RoundSlots'\nimport RoundStatus from './RoundStatus';\n\n\nclass RoundScreen extends Component {\n  render() {\n    const { roundStore, } = this.props\n\n    return (\n      <Grid container direction=\"column\" spacing={24}>\n        <Grid item xs={12}>\n          <Typography variant=\"headline\">\n            Current Forging Round \n            {roundStore.hasNewRound ? ` ${roundStore.newRound.roundNumber}` : null}\n          </Typography>\n        </Grid>\n        <Grid item xs={12}>\n          <Grid container spacing={24}>\n            <Grid item xs={3}>\n              <NetworkStatus />\n            </Grid>\n            <Grid item xs={3}>\n              <RoundStatus />\n            </Grid>\n            <Grid item xs={3}>\n              <RoundProgress />\n            </Grid>\n            <Grid item xs={3}>\n              <Typography variant=\"h5\">\n                Rewards\n              </Typography>\n            </Grid>\n          </Grid>\n        </Grid>\n        <Grid item xs={12}>\n          <RoundSlots />\n        </Grid>\n      </Grid>\n    )\n  }\n}\n\nexport default inject('roundStore')(observer(RoundScreen))\n","import React, { Component } from 'react'\nimport { inject, observer } from 'mobx-react'\nimport { \n          Avatar,\n          Card,\n          CardContent,\n          Table,\n          TableBody,\n          TableCell,\n          TableHead,\n          TableRow,\n          withStyles,\n        } from '@material-ui/core'\n\nimport AnnouncementIcon from '@material-ui/icons/Announcement'\nimport CheckCircle from '@material-ui/icons/CheckCircle'\nimport UpdateIcon from '@material-ui/icons/Update'\n\n\nconst styles = theme => ({\n  missedBlockAvatar: {\n    backgroundColor: theme.palette.error.main,\n  },\n  successfulBlockAvatar: {\n    backgroundColor: theme.palette.primary.main,\n  },\n})\n\nconst Slot = withStyles(styles)(({ key, hasBeenCompleted, hasMissedBlock, ... rest, }) => {\n  const diff = hasBeenCompleted\n    ? hasMissedBlock\n      ? {\n        className: rest.classes.missedBlockAvatar,\n        component: AnnouncementIcon,\n        Forged: () => <TableCell align=\"center\">{ 'missed' }</TableCell>,\n      } : {\n        className: rest.classes.successfulBlockAvatar,\n        component: CheckCircle,\n        Forged: () => <TableCell align=\"right\">{rest.totalForged.toFixed(4)}</TableCell>,\n      }\n    : {\n      className: '',\n      component: UpdateIcon,\n      Forged: () => <TableCell align=\"center\">{ '--' }</TableCell>,\n    }\n\n  return (\n    <TableRow key={key}>\n      <TableCell>\n        <Avatar className={diff.className}>\n          <diff.component />\n        </Avatar>\n      </TableCell>\n      <TableCell align=\"right\">{rest.slot}</TableCell>\n      <TableCell>{rest.name}</TableCell>\n      <TableCell align=\"right\">{rest.rank}</TableCell>\n      <TableCell align=\"right\">{Number(rest.vote.toFixed(0)).toLocaleString()}</TableCell>\n      <diff.Forged />\n      <TableCell align=\"right\">{new Date(rest.timestamp).toLocaleString()}</TableCell>\n    </TableRow>\n  )\n})\n\n\nclass RoundSlots extends Component {\n  render() {\n    const { slotStore } = this.props\n\n    return (\n      <Card>\n        <CardContent>\n          {slotStore.init.match({\n            pending: () => <div>Loading, please wait..</div>,\n            rejected: (err) => <div>Error: {err.message}</div>,\n            resolved: () => (\n              <Table>\n                <TableHead>\n                  <TableRow>\n                    <TableCell>&nbsp;</TableCell>\n                    <TableCell align=\"right\">Slot</TableCell>\n                    <TableCell>Delegate</TableCell>\n                    <TableCell align=\"right\">Rank</TableCell>\n                    <TableCell align=\"right\">Vote</TableCell>\n                    <TableCell align=\"right\">Forged (BPL)</TableCell>\n                    <TableCell align=\"right\">Date</TableCell>\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                  {slotStore.slots.map(forger => (\n                    <Slot key={forger.slot} {...forger} />\n                  ))}\n                </TableBody>\n              </Table>\n            )\n          })} \n        </CardContent>\n      </Card>\n    )\n  }\n}\n\nexport default inject('slotStore')(observer(RoundSlots))\n","import React, { Component } from 'react'\nimport { inject, observer, } from 'mobx-react'\nimport { Card, CardContent, Grid, Typography, } from '@material-ui/core'\n\n\nclass RoundProgress extends Component {\n  render() {\n    const { blockStore, roundStore, } = this.props\n\n    return (\n      <Card>\n        <CardContent>\n          <Grid container direction=\"column\" spacing={8}>\n            <Grid item>\n              <Typography variant=\"subtitle1\">\n                Round Status: In Progress\n              </Typography>\n            </Grid>\n            <Grid item>\n              <Typography variant=\"subtitle1\">\n                Current Height: {blockStore.lastProcessedBlockHeight}\n              </Typography>\n            </Grid>\n            <Grid item>\n              <Typography variant=\"subtitle1\">\n                Start Height: {roundStore.startHeight}\n              </Typography>\n            </Grid>\n            <Grid item>\n              <Typography variant=\"subtitle1\">\n                End Height: {roundStore.endHeight}\n              </Typography>\n            </Grid>\n          </Grid>\n        </CardContent>\n      </Card>\n    )\n  }\n}\n\nexport default inject('blockStore', 'roundStore')(observer(RoundProgress))\n","import fetch from 'node-fetch'\nimport qs from 'querystring'\n\n\nasync function makeApiRequest(url, params) {\n  return new Promise(async (resolve, reject) => {\n    try {\n      const query = params ? `?${qs.stringify(params)}` : ''\n      const requestUrl = `${url}${query}`\n\n      const rawResponse = await fetch(requestUrl, {\n        method: 'GET',\n      })\n      const response = await rawResponse.json()\n\n      if (response.success) {\n        resolve(response)\n      } else {\n        console.log(response)\n        reject(new Error(`Request did not complete successfully.`))\n      }\n    } catch (err) {\n      reject(err)\n    }\n  })\n}\n\nexport default class NodeApi {\n  apiServer = 'https://api.bplforge.com'\n\n  async getActiveDelegates() {\n    return makeApiRequest(this.getUrl('delegates'), 0, 201)\n    /*\n    return {\n      delegates: [\n        { publicKey: 1, blockRoundSlot: 1, username: 'Delegate 1', },\n        { publicKey: 2, blockRoundSlot: 2, username: 'Delegate 2', },\n        { publicKey: 3, blockRoundSlot: 3, username: 'Delegate 3', },\n        { publicKey: 4, blockRoundSlot: 4, username: 'Delegate 4', },\n        { publicKey: 5, blockRoundSlot: 5, username: 'Delegate 5', },\n      ]\n    }\n    */\n  }\n\n  async getBlocks(offset = 0, limit = 100) {\n    return makeApiRequest(this.getUrl('blocks'), { limit, offset })\n  }\n\n  async getCurrentRound() {\n    return makeApiRequest(this.getUrl('rounds'))\n    /*\n    return {\n      delegateActivity: [\n        { publicKey: 1, hasMissedBlock: false, roundSlot: 1, totalForged: '12345668.823422', },\n        { publicKey: 2, hasMissedBlock: true, roundSlot: 2, totalForged: '23424.823422', },\n        { publicKey: 3, hasMissedBlock: false, roundSlot: 3, totalForged: '23893054.823422', },\n      ],\n      expectedForgers: [\n        { publicKey: 4, blockRoundSlot: 4, username: 'Delegate 4', },\n        { publicKey: 5, blockRoundSlot: 5, username: 'Delegate 5', },\n      ],\n    }\n    */\n  }\n\n  async getRewardBlocks(generatorPublicKey) {\n    return makeApiRequest(this.getUrl('blocks'), { generatorPublicKey })\n  }\n\n  async getSyncStatus(server) {\n    return makeApiRequest(this.getUrl('loader/status/sync', server))\n  }\n\n  async getTransactions(address) {\n    return makeApiRequest(this.getUrl('transactions'), {\n      senderId: address,\n      recipientId: address,\n    })\n  }\n\n  getUrl(path, alternateServer) {\n    const server = alternateServer || this.apiServer\n    return `${server}/api/${path}`\n  }\n\n  async getVoters(publicKey) {\n    return makeApiRequest(this.getUrl('delegates/voters'), { publicKey })\n  }\n}\n","import Big from 'big-js'\nimport TimeAgo from 'javascript-time-ago'\nimport en from 'javascript-time-ago/locale/en'\n\nTimeAgo.locale(en)\n\n// Create relative date/time formatter.\nconst timeAgo = new TimeAgo('en-US')\n\nexport function fromApiString(bplString) {\n  return Big(bplString).div('100000000')\n}\n\nexport function toFixed(big, digits = 0) {\n  return big.toFixed(digits)\n}\n\nexport function toFixedLocale(big, digits = 0) {\n  return Number(big.toFixed(digits)).toLocaleString()\n}\n\nexport function toHowLong(timestamp) {\n  return timeAgo.format(timestamp)\n}\n","\nexport function log() {\n  console.log.apply(console, Array.prototype.slice.call(arguments, 0))\n}\n","\nexport const byAscending = prop => (a, b) => a[prop] > b[prop] ? 1 : b[prop] > a[prop] ? -1 : 0\n\nexport const byDescending = prop => (a, b) => a[prop] > b[prop] ? -11 : b[prop] > a[prop] ? 1 : 0\n","const blockInterval = 15 * 1000\nconst epochTimeUtc = Date.UTC(2017, 2, 21, 13, 0, 0, 0)\nconst epochSeconds = Math.floor(epochTimeUtc / 1000)\n\n\nexport const currentMsTimestamp = () =>\n  Date.now()\n\nexport const fromApiToMs = apiTimestamp =>\n  (apiTimestamp + epochSeconds) * 1000\n\nexport function getApiTimestamp() {\n  const currentSeconds = Math.floor(currentMsTimestamp() / 1000)\n\n  return currentSeconds - epochSeconds\n}\n\nexport const nextMsTimestamp = msTimestamp =>\n  msTimestamp + blockInterval\n\nexport function getTimestamp(apiTimestamp) {\n  return (apiTimestamp + epochSeconds) * 1000\n}\n","import { action,\n         computed, \n         decorate,\n         observable,\n         onBecomeObserved,\n         onBecomeUnobserved,\n         when,\n       } from 'mobx'\n\nimport { log } from '../domain/util/logger'\nimport { byAscending } from '../domain/util/sorters'\n\nconst blockInterval = 15 * 1000\n\n\nexport default class BlockStore {\n  blockListener\n  lastProcessedBlockHeight\n  unprocessedBlocks = new Map()\n\n  constructor(nodeApi, roundStore) {\n    this.nodeApi = nodeApi\n    this.roundStore = roundStore\n\n    when(() => this.roundStore.hasNewRound, () => this.init())\n\n    onBecomeObserved(this, 'hasNextBlock', this.resume)\n    onBecomeUnobserved(this, 'hasNextBlock', this.suspend)\n  }\n\n  init() {\n    log('Initializing Block Store.')\n    this.lastProcessedBlockHeight = this.roundStore.initialBlockHeight\n    log(`Block store will load blocks after height ${this.lastProcessedBlockHeight}`)\n  }\n\n  resume = () => {\n    log('Resuming block listener.')\n    this.blockListener = setInterval(() => this.listenForNewBlocks(), blockInterval)\n  }\n\n  async listenForNewBlocks() {\n    let offset = 0\n    let hasLoadedNewBlocks = true\n    while (!this.hasNextBlock && hasLoadedNewBlocks) {\n      let blocks = await this.nodeApi.getBlocks(offset, 10)\n      let newBlocks = blocks.blocks.filter(b => b.height > this.lastProcessedBlockHeight)\n      \n      if (newBlocks.length > 0) {\n        newBlocks.forEach(b => this.unprocessedBlocks.set(b.height, b))\n        log(`There are ${newBlocks.length} new blocks awaiting processing out of ${this.unprocessedBlocks.size} total.`)\n        offset += 10\n      } else {\n        log(`No new blocks loaded.`)\n        hasLoadedNewBlocks = false\n      }\n    }\n  }\n\n  suspend = () => {\n    log('Suspending block listener.')\n    clearInterval(this.blockListener)\n  }\n\n  get hasNextBlock() {\n    return this.unprocessedBlocks.has(this.nextBlockHeight)\n  }\n\n  nextBlock() {\n    const next = this.unprocessedBlocks.get(this.nextBlockHeight)\n    this.lastProcessedBlockHeight = this.nextBlockHeight\n    log(`Processing block height ${this.lastProcessedBlockHeight}`)\n    return next\n  }\n  \n  get nextBlockHeight() {\n    return this.lastProcessedBlockHeight + 1\n  }\n}\n\ndecorate(BlockStore, {\n  hasNextBlock: computed,\n  lastProcessedBlockHeight: observable,\n  listenForNewBlocks: action,\n  nextBlock: action,\n  nextBlockHeight: computed,\n  unprocessedBlocks: observable,\n})\n","import { computed, decorate, observable, when, } from 'mobx'\nimport { task } from 'mobx-task'\n\nimport { fromApiString } from '../domain/util/format'\n\nclass Paginator {\n  allItems = []\n  pageNumber = 0\n  pageSize = 25\n  totalCount = 0\n\n  constructor(items, totalCount = null) {\n    if (items) {\n      this.allItems.replace(items)\n    }\n\n    this.totalCount = totalCount === null ? items.length : totalCount\n  }\n\n  get items() {\n    const pageStartIndex = this.pageNumber * this.pageSize\n    const pageEndIndex = pageStartIndex + this.pageSize - 1\n    return this.allItems.slice(pageStartIndex, pageEndIndex)\n  }\n}\n\ndecorate(Paginator, {\n  allItems: observable,\n  items: computed,\n  pageNumber: observable,\n  pageSize: observable,\n  totalCount: observable,\n})\n\n\n\nexport default class DelegateStore {\n  activeDelegate = null\n  addressToPublicKey = new Map()\n  delegates = new Map()\n  isInitialized = false\n\n  constructor(nodeApi) {\n    this.nodeApi = nodeApi\n  }\n\n  async init() {\n    console.log('Initializing Delegate Store.')\n    const delegates = await this.nodeApi.getActiveDelegates()\n    delegates.delegates.forEach(d => {\n      this.delegates.set(d.publicKey, d)\n      this.addressToPublicKey.set(d.address, d.publicKey)\n    })\n\n    this.isInitialized = true\n  }\n\n  get(publicKey) {\n    return this.delegates.get(publicKey)\n  }\n\n  get hasLoadedDelegates() {\n    return this.delegates.size > 0\n  }\n\n  async setActiveDelegate(address) {\n    await when(() => this.isInitialized)\n    \n    console.log(`Setting active delegate: ${address}`)\n    const publicKey = this.addressToPublicKey.get(address)\n    const delegate = this.delegates.get(publicKey)\n    const rewardBlocks = await this.nodeApi.getRewardBlocks(publicKey)\n    const voters = await this.nodeApi.getVoters(publicKey)\n    console.log(rewardBlocks)\n    const transformedBlocks = rewardBlocks.blocks.map(b => ({\n      ... b,\n\n      reward: fromApiString(b.reward),\n      totalAmount: fromApiString(b.totalAmount),\n      totalFee: fromApiString(b.totalFee),\n      totalForged: fromApiString(b.totalForged),\n    }))\n\n    this.activeDelegate = {\n      ... delegate,\n\n      rewardBlockPagination: new Paginator(transformedBlocks, rewardBlocks.count),\n      vote: fromApiString(delegate.vote),\n      voters: voters.accounts.map(v => ({\n        ... v,\n\n        balance: fromApiString(v.balance),\n      })),\n    }\n  }\n}\n\n\ndecorate(DelegateStore, {\n  activeDelegate: observable,\n  delegates: observable,\n  hasLoadedDelegates: computed,\n  isInitialized: observable,\n  setActiveDelegate: task,\n})\n","import { action,\n         computed, \n         decorate,\n         observable,\n       } from 'mobx'\nimport { task } from 'mobx-task'\n\n\nexport default class NetworkStore {\n  seedNodes = []\n\n  constructor(nodeApi) {\n    this.nodeApi = nodeApi\n  }\n\n  async init() {\n    const seedNodes = [\n      'http://s01.mc.blockpool.io:9030'\n    , 'http://s02.mc.blockpool.io:9030'\n    , 'http://s03.mc.blockpool.io:9030'\n    , 'http://s04.mc.blockpool.io:9030'\n    , 'http://s05.mc.blockpool.io:9030'\n    , 'http://s06.mc.blockpool.io:9030'\n    , 'http://s07.mc.blockpool.io:9030'\n    , 'http://s08.mc.blockpool.io:9030'\n    , 'http://s09.mc.blockpool.io:9030'\n    , 'http://s10.mc.blockpool.io:9030'\n    ]\n\n    for (let i = 0; i < seedNodes.length; i += 1) {\n      let server = seedNodes[i]\n      let status = await this.nodeApi.getSyncStatus()\n      this.seedNodes.push({\n        server,\n        height: status.height,\n      })\n    }\n\n    console.log(seedNodeStatus)\n  }\n\n  get networkHeight() {\n    return this.seedNodes.reduce((maxHeight, node) => node.height > maxHeight ? node.height : maxHeight, 0)\n  }\n\n  get seedStatus() {\n    const height = this.networkHeight\n    return this.seedNodes.reduce((status, node) => {\n      status.total += 1\n      if (height - node.height <= 1) {\n        status.ok += 1\n      }\n      return status\n    }, {\n      ok: 0,\n      total: 0,\n    })\n  }\n}\n\ndecorate(NetworkStore, {\n  init: task,\n  networkHeight: computed,\n  seedNodes: observable,\n  seedStatus: computed,\n})\n","import fetch from 'node-fetch'\nimport { log } from '../domain/util/logger'\nimport { action,\n  computed, \n  decorate,\n  observable,\n  onBecomeObserved,\n  onBecomeUnobserved,\n} from 'mobx'\n\nconst priceInterval = 5 * 60 * 1000\nconst priceUrl = 'https://min-api.cryptocompare.com/data/price?fsym=BPL&tsyms=BTC,USD,GBP,EUR,CNY,AUD'\n\n\nexport default class PriceStore {\n  currency = 'USD'\n  listener\n  prices = { USD: '', EUR: '', }\n  \n  constructor() {\n    onBecomeObserved(this, 'price', this.resume)\n    onBecomeUnobserved(this, 'price', this.suspend)\n  }\n\n  async fetchPrice() {\n    const priceResponse = await fetch(priceUrl)\n    const priceResult = await priceResponse.json()\n\n    this.prices = priceResult\n    log(this.currency, priceResult)\n  }\n\n  get price() {\n    return this.prices[this.currency]\n  }\n\n  resume = () => {\n    log('Resuming price listener')\n    this.listener = setInterval(() => this.fetchPrice(), priceInterval)\n  }\n\n  suspend = () => {\n    log('Suspening price listener')\n    clearInterval(this.listener)\n  }\n\n  setCurrency(currency) {\n    this.currency = currency\n  }\n}\n\ndecorate(PriceStore, { \n  currency: observable,\n  fetchPrice: action,\n  price: computed,\n  prices: observable,\n})\n","import { action,\n         computed, \n         decorate,\n         observable,\n       } from 'mobx'\n\nimport { log } from '../domain/util/logger'\n\n\nexport default class RoundStore {\n  constructor(nodeApi) {\n    this.nodeApi = nodeApi\n  }\n\n  newRound = null\n\n  get hasNewRound() {\n    return this.newRound !== null\n  }\n\n  async init() {\n    log(`Loading initial current round.`)\n    const currentRound = await this.nodeApi.getCurrentRound()\n    log(`Initial current round loaded.`, currentRound)\n\n    this.newRound = currentRound\n  }\n\n  get initialBlockHeight() {\n    return this.hasNewRound\n      ? this.newRound.delegateActivity.reduce((initialHeight, slot) => {\n            const slotValue = slot.hasMissedBlock ? 0 : 1\n            return initialHeight + slotValue\n          },\n          this.newRound.fromBlock - 1\n        ) \n      : 0\n  }\n\n  get endHeight() {\n    return this.hasNewRound\n      ? this.startHeight + 200\n      : 'n/a'\n  }\n\n  get startHeight() {\n    return this.hasNewRound\n      ? this.newRound.fromBlock\n      : 'n/a'\n  }\n}\n\ndecorate(RoundStore, {\n  endHeight: computed,\n  hasNewRound: computed,\n  init: action,\n  initialBlockHeight: computed,\n  newRound: observable,\n  startHeight: computed,\n})\n","import Big from 'big-js'\nimport { action,\n         computed, \n         decorate,\n         observable,\n         runInAction,\n         when,\n       } from 'mobx'\nimport { task } from 'mobx-task'\n\nimport { log } from '../domain/util/logger'\nimport getSlotsFromInitialData, { createSlotFromBlock, basicSlot } from './slotFactory'\nimport { nextMsTimestamp } from '../domain/util/time';\n\n\nexport default class SlotStore {\n  completedSlots = []\n  hasCompletedSlotsForRound = false\n  isAwaitingBlock = true\n  isAwaitingSlot = true\n  roundSlots = new Map()\n  slotInProcess = null\n  slots = []\n  upcomingSlots = []\n  unprocessedSlots = []\n\n  constructor(blockStore, delegateStore, roundStore) {\n    this.blockStore = blockStore\n    this.delegateStore = delegateStore\n    this.roundStore = roundStore\n  }\n\n  async init() {\n    log('Initializing Slot Store.')\n    await when(() => this.roundStore.hasNewRound && this.delegateStore.hasLoadedDelegates)\n\n    const result = getSlotsFromInitialData(this.roundStore.newRound, this.delegateStore)    \n    this.watchForNextBlock()\n    this.watchForUnprocessedSlot()\n\n    runInAction(() => {\n      this.completedSlots.replace(result.completed)\n      this.upcomingSlots.replace(result.upcoming)\n      this.slots.replace(result.slots)\n\n      this.completedSlots.forEach(s => this.roundSlots.set(s.slot, s))\n      this.upcomingSlots.forEach(s => this.roundSlots.set(s.slot, s))\n    }) \n  }\n\n  watchForNextBlock() {\n    when(() => this.blockStore.hasNextBlock && this.isAwaitingBlock, () => this.processReceivedBlock())\n  }\n\n  getRoundSlot(totalSlot) {\n    // From BPL-node code\n    return this.roundSlots.get(totalSlot % 201)\n  }\n\n  processReceivedBlock() {\n    this.isAwaitingBlock = false\n    this.watchForNextBlock()\n\n    const nextBlock = this.blockStore.nextBlock()\n    log('Processing next block.', nextBlock)\n\n    const blockSlots = this.upcomingSlots.reduce((all, slot) => {\n      if (all.hasFoundProcessedSlot) {\n        all.upcomingSlots.push(slot)\n      } else {\n        const completedSlot = createSlotFromBlock(slot, all.block)\n        all.hasFoundProcessedSlot = !completedSlot.hasMissedBlock\n        all.unprocessedSlots.push(completedSlot)\n\n        if (completedSlot.hasMissedBlock) {\n          all.totalSlotCount += 1\n          let roundSlot = this.getRoundSlot(all.totalSlotCount)\n          let matchingDelegate = this.delegateStore.get(roundSlot.publicKey)\n          let lastSlot = this.upcomingSlots[this.upcomingSlots.length - 1]\n          all.additionalSlots.push(basicSlot(all.totalSlotCount, matchingDelegate, nextMsTimestamp(lastSlot.timestamp)))\n        }\n      }\n      return all\n    }, {\n      additionalSlots: [],\n      block: nextBlock,\n      hasFoundProcessedSlot: false,\n      totalSlotCount: this.completedSlots.length + this.upcomingSlots.length,\n      unprocessedSlots: [],\n      upcomingSlots: [],\n    })\n\n    this.unprocessedSlots.replace(this.unprocessedSlots.concat(blockSlots.unprocessedSlots))\n    this.upcomingSlots.replace(blockSlots.upcomingSlots.concat(blockSlots.additionalSlots))\n\n    this.hasCompletedSlotsForRound = this.unprocessedSlots.length === 0 && this.upcomingSlots.length === 0\n  }\n\n  watchForUnprocessedSlot() {\n    when(() => this.isAwaitingSlot && this.hasUnprocessedSlots, () => this.processNextSlot())\n  }\n  \n  get hasUnprocessedSlots() {\n    return this.unprocessedSlots.length > 0\n  }\n\n  nextUnprocessedSlot() {\n    return this.unprocessedSlots.shift()\n  }\n\n  processNextSlot() {\n    this.isAwaitingSlot = false\n    this.watchForUnprocessedSlot()\n\n    const nextSlot = this.nextUnprocessedSlot()\n    log('Processing next slot.', nextSlot)\n\n    this.slotInProcess = {\n      hasLeftUpcoming: false,\n      shouldBeVisible: true,\n      slot: nextSlot,\n    }\n\n    setTimeout(() => this.slotInProcess.shouldBeVisible = false, 0)\n  }\n\n  get hasSlotInProcess() {\n    return this.slotInProcess !== null\n  }\n\n  get missedBlockCount() {\n    return this.completedSlots.filter(s => s.hasMissedBlock).length\n  }\n\n  get remainingSlotCount() {\n    return this.unprocessedSlots.length + this.upcomingSlots.length\n  }\n\n  get successfulForgeCount() {\n    return this.completedSlots.filter(s => !s.hasMissedBlock).length\n  }\n  \n  get totalForgedAmount() {\n    return this.completedSlots\n      .filter(s => !s.hasMissedBlock)\n      .reduce((sum, slot) => sum.plus(slot.totalForged), Big(0))\n  }\n\n  slotJoinedCompleted() {\n    this.isAwaitingSlot = true\n    this.completedSlots.unshift(this.slotInProcess.slot)\n    this.slotInProcess = null\n\n    if (!this.hasUnprocessedSlots) {\n      this.isAwaitingBlock = true\n    }\n  }\n\n  slotLeftUpcoming() {\n    this.slotInProcess.hasLeftUpcoming = true\n\n    setTimeout(() => this.slotInProcess.shouldBeVisible = true, 0)\n  }\n}\n\ndecorate(SlotStore, {\n  completedSlots: observable,\n  hasCompletedSlotsForRound: observable,\n  hasSlotInProcess: computed,\n  hasUnprocessedSlots: computed,\n  init: task,\n  isAwaitingBlock: observable,\n  isAwaitingSlot: observable,\n  missedBlockCount: computed,\n  nextUnprocessedSlot: action,\n  processReceivedBlock: action,\n  processNextSlot: action,\n  remainingSlotCount: computed,\n  slotInProcess: observable,\n  slotJoinedCompleted: action,\n  slotLeftUpcoming: action,\n  slots: observable,\n  successfulForgeCount: computed,\n  totalForgedAmount: computed,\n  upcomingSlots: observable,\n  unprocessedSlots: observable,\n})\n","import { fromApiString } from '../domain/util/format'\nimport { byDescending } from '../domain/util/sorters'\nimport { currentMsTimestamp, fromApiToMs, nextMsTimestamp } from '../domain/util/time'\n\nexport function createSlotFromBlock(slot, block) {\n  let hasMissedBlock = slot.publicKey !== block.generatorPublicKey\n  let blockProps = hasMissedBlock ? {} : {\n    totalForged: fromApiString(block.totalForged),\n  }\n  return {\n    ... slot,\n    hasMissedBlock,\n    ... blockProps,\n  }\n}\n\nexport function completedSlotFromDelegate(slot, delegate, timestamp) {\n  const blockProps = slot.hasMissedBlock ? {} : {\n    totalForged: fromApiString(slot.totalForged),\n  }\n  return {\n    ... basicSlot(slot.roundSlot, delegate, timestamp),\n    hasBeenCompleted: true,\n    hasMissedBlock: slot.hasMissedBlock,\n    ... blockProps,\n  }\n}\n\nexport function basicSlot(number, delegate, timestamp) {\n  return {\n    address: delegate.address,\n    hasBeenCompleted: false,\n    name: delegate.username,\n    number,\n    publicKey: delegate.publicKey,\n    rank: delegate.rate,\n    slot: number,\n    timestamp,\n    vote: fromApiString(delegate.vote),\n  }\n}\n\nexport default function getSlotsFromInitialData(currentRound, delegates) {\n  let result = {\n    completed: [],\n    lastTimestamp: currentMsTimestamp(),\n    slots: [],\n    upcoming: [],\n  }\n\n  result = currentRound.delegateActivity.reduce((all, slot) => {\n    all.lastTimestamp = slot.hasMissedBlock\n      ? nextMsTimestamp(all.lastTimestamp)\n      : fromApiToMs(slot.timestamp)\n    const newSlot = completedSlotFromDelegate(slot, delegates.get(slot.publicKey), all.lastTimestamp)\n    all.completed.push(newSlot)\n    all.slots.push(newSlot)\n    return all\n  }, result)\n\n  result = currentRound.expectedForgers.reduce((all, slot) => {\n    all.lastTimestamp = nextMsTimestamp(all.lastTimestamp)\n    const newslot = basicSlot(slot.blockRoundSlot, delegates.get(slot.publicKey), all.lastTimestamp)\n    all.upcoming.push(newslot)\n    all.slots.push(newslot)\n    return all\n  }, result)\n\n  result.completed.sort(byDescending('slot'))\n\n  return result\n}\n","module.exports = require(\"@babel/polyfill\");","module.exports = require(\"@material-ui/core\");","module.exports = require(\"@material-ui/core/colors/green\");","module.exports = require(\"@material-ui/core/colors/red\");","module.exports = require(\"@material-ui/core/styles\");","module.exports = require(\"@material-ui/icons/Announcement\");","module.exports = require(\"@material-ui/icons/CheckCircle\");","module.exports = require(\"@material-ui/icons/Update\");","module.exports = require(\"big-js\");","module.exports = require(\"cors\");","module.exports = require(\"express\");","module.exports = require(\"fs\");","module.exports = require(\"javascript-time-ago\");","module.exports = require(\"javascript-time-ago/locale/en\");","module.exports = require(\"mobx\");","module.exports = require(\"mobx-react\");","module.exports = require(\"mobx-task\");","module.exports = require(\"node-fetch\");","module.exports = require(\"path\");","module.exports = require(\"querystring\");","module.exports = require(\"react\");","module.exports = require(\"react-dom/server\");","module.exports = require(\"react-jss/lib/JssProvider\");","module.exports = require(\"react-jss/lib/jss\");","module.exports = require(\"react-router-dom\");"],"sourceRoot":""}