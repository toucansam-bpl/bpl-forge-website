{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./public/img/bpl-logo.png","webpack:///./src/server/middleware/renderer.js","webpack:///./src/server/server.js","webpack:///./src/shared/App.js","webpack:///./src/shared/CalculatorScreen/CalculatorScreen.js","webpack:///./src/shared/DelegateScreen/DelegateScreen.js","webpack:///./src/shared/RoundScreen/CompletedSlots.js","webpack:///./src/shared/RoundScreen/RoundScreen.js","webpack:///./src/shared/RoundScreen/UpcomingSlots.js","webpack:///./src/shared/domain/api/NodeApi.js","webpack:///./src/shared/domain/util/logger.js","webpack:///./src/shared/domain/util/sorters.js","webpack:///./src/shared/domain/util/time.js","webpack:///./src/shared/stores/BlockStore.js","webpack:///./src/shared/stores/RoundStore.js","webpack:///./src/shared/stores/SlotStore.js","webpack:///external \"@babel/polyfill\"","webpack:///external \"@material-ui/core\"","webpack:///external \"@material-ui/core/Avatar\"","webpack:///external \"@material-ui/core/ListItemText\"","webpack:///external \"@material-ui/core/colors/green\"","webpack:///external \"@material-ui/core/colors/red\"","webpack:///external \"@material-ui/core/styles\"","webpack:///external \"@material-ui/icons/Announcement\"","webpack:///external \"@material-ui/icons/CheckCircle\"","webpack:///external \"@material-ui/icons/Update\"","webpack:///external \"cors\"","webpack:///external \"express\"","webpack:///external \"fs\"","webpack:///external \"mobx\"","webpack:///external \"mobx-react\"","webpack:///external \"mobx-task\"","webpack:///external \"node-fetch\"","webpack:///external \"path\"","webpack:///external \"querystring\"","webpack:///external \"react\"","webpack:///external \"react-dom/server\"","webpack:///external \"react-jss/lib/JssProvider\"","webpack:///external \"react-jss/lib/jss\"","webpack:///external \"react-router-dom\""],"names":["renderFullPage","html","css","Promise","resolve","reject","filePath","__dirname","err","page","replace","req","res","sheetsRegistry","SheetsRegistry","console","log","url","theme","palette","primary","green","accent","red","type","generateClassName","nodeApi","NodeApi","roundStore","RoundStore","blockStore","BlockStore","slotStore","SlotStore","stores","Map","toString","runner","pageHtml","send","status","end","app","use","get","renderer","express","static","listen","styles","content","marginTop","padding","minHeight","flex","menuButton","marginLeft","marginRight","App","classes","props","logo","height","verticalAlign","RoundScreen","DelegateScreen","CalculatorScreen","Component","missedBlockAvatar","backgroundColor","error","main","successfulBlockAvatar","CompletedSlot","hasMissedBlock","rest","CompletedForgedSlot","name","slot","timestamp","Date","toLocaleString","CompletedMissedSlot","CollapsableSlot","ListItem","slotInProcess","shouldBeVisible","slotJoinedCompleted","CompletedSlots","Incoming","hasSlotInProcess","hasLeftUpcoming","init","match","pending","rejected","message","resolved","completedSlots","map","forger","UpcomingSlot","slotLeftUpcoming","UpcomingSlots","Outgoing","upcomingSlots","concat","unprocessedSlots","api","makeApiRequest","params","query","qs","stringify","requestUrl","method","rawResponse","json","response","success","Error","offset","limit","generatorPublicKey","address","senderId","recipientId","publicKey","apply","Array","prototype","slice","call","arguments","byAscending","prop","a","b","byDescending","blockInterval","epochTimeUtc","UTC","epochSeconds","Math","floor","currentMsTimestamp","now","fromApiToMs","apiTimestamp","getApiTimestamp","currentSeconds","nextMsTimestamp","msTimestamp","getTimestamp","blockListener","lastProcessedBlockHeight","unprocessedBlocks","resume","setInterval","listenForNewBlocks","suspend","clearInterval","hasNewRound","initialBlockHeight","getBlocks","blocks","newBlocks","filter","sort","newUnprocessed","length","next","shift","hasNextBlock","computed","action","nextBlock","observable","newRound","getCurrentRound","currentRound","delegateActivity","reduce","initialHeight","slotValue","fromBlock","isAwaitingBlock","isAwaitingSlot","getActiveDelegates","delegates","delegatesById","all","delegate","username","result","getSlotsFromInitialData","currentHeight","watchForNextBlock","watchForUnprocessedSlot","completed","upcoming","processReceivedBlock","blockSlots","hasFoundProcessedSlot","push","block","blockProps","totalForged","hasUnprocessedSlots","processNextSlot","nextSlot","nextUnprocessedSlot","setTimeout","unshift","task","round","roundNumber","lastTimestamp","toBlock","blockHeight","roundSlot","expectedForgers","blockRoundSlot"],"mappings":"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","file":"server.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","module.exports = __webpack_public_path__ + \"static/media/bpl-logo.8b1be392.png\";","import React from 'react'\nimport { readFile } from 'fs'\nimport { resolve as resolvePath } from 'path'\nimport { Provider as MobxProvider } from 'mobx-react'\nimport { renderToString } from 'react-dom/server'\nimport { SheetsRegistry } from 'react-jss/lib/jss'\nimport JssProvider from 'react-jss/lib/JssProvider'\nimport { StaticRouter } from 'react-router-dom'\nimport { MuiThemeProvider, createMuiTheme, createGenerateClassName, } from '@material-ui/core/styles'\nimport green from '@material-ui/core/colors/green'\nimport red from '@material-ui/core/colors/red'\n\nimport App from '../../shared/App'\nimport BlockStore from '../../shared/stores/BlockStore'\nimport NodeApi from '../../shared/domain/api/NodeApi'\nimport RoundStore from '../../shared/stores/RoundStore'\nimport SlotStore from '../../shared/stores/SlotStore'\n\n\nconst renderFullPage = async (html, css) => \n  new Promise((resolve, reject) => {\n    const filePath = resolvePath(__dirname, '..', '..', '..', 'public', 'index.html')\n  \n    readFile(filePath, 'utf8', (err, page) => {\n      if (err) {\n        return reject(err)\n      }\n\n      resolve(page.replace(\n        '<div id=\"root\"></div>',\n        `<div id=\"root\">${html}</div>`\n      ).replace(\n        '<style id=\"jss-server-side\"></style>',\n        `<style id=\"jss-server-side\">${css}</style>`\n      ))\n    })\n  })\n\n\nexport default (req, res) => {\n  // Create a sheetsRegistry instance.\n  const sheetsRegistry = new SheetsRegistry()\n\n  console.log(`Serving ${req.url}`)\n\n  // Create a theme instance.\n  const theme = createMuiTheme({\n    palette: {\n      primary: green,\n      accent: red,\n      type: 'light',\n    },\n  })\n\n  const generateClassName = createGenerateClassName()\n  const nodeApi = new NodeApi()\n  const roundStore = new RoundStore(nodeApi)\n  const blockStore = new BlockStore(nodeApi, roundStore)\n  const slotStore = new SlotStore(nodeApi, blockStore, roundStore)\n  \n  const stores = {\n    blockStore,\n    roundStore,\n    slotStore,\n  }\n\n  // Render the component to a string.\n  const html = renderToString(\n    <JssProvider registry={sheetsRegistry} generateClassName={generateClassName}>\n      <MuiThemeProvider theme={theme} sheetsManager={new Map()}>\n        <MobxProvider {... stores}>\n          <StaticRouter location={req.url} context={{}}>\n            <App />\n          </StaticRouter>\n        </MobxProvider>\n      </MuiThemeProvider>\n    </JssProvider>\n  )\n\n  // Grab the CSS from our sheetsRegistry.\n  const css = sheetsRegistry.toString()\n\n  const runner = async () => {\n    try {\n      const pageHtml = await renderFullPage(html, css)\n      res.send(pageHtml)\n    } catch (ex) {\n      console.log(`Error in server: ${ex}`)\n      res.status(500).end()\n    }\n  }\n  runner()\n}\n","import express from 'express'\nimport cors from 'cors'\n\nimport renderer from './middleware/renderer'\n\n\nconst app = express()\n\napp.use(cors())\n\napp.get('^/$', renderer)\n\napp.use(express.static('public'))\n\napp.get('*', renderer)\n\napp.listen(3000, () => {\n  console.log(`Server is listening on port: 3000`)\n})\n","import React, { Component } from 'react'\nimport {\n  AppBar,\n  CssBaseline,\n  Hidden,\n  Toolbar,\n  Typography,\n  withStyles,\n} from '@material-ui/core'\nimport { Link, Route, Switch } from 'react-router-dom'\n\nimport logo from '../../public/img/bpl-logo.png'\nimport CalculatorScreen from './CalculatorScreen/CalculatorScreen'\nimport DelegateScreen from './DelegateScreen/DelegateScreen'\nimport RoundScreen from './RoundScreen/RoundScreen'\n\n\nconst styles = theme => ({\n  content: {\n    marginTop: \"70px\",\n    padding: \"30px 15px\",\n    minHeight: \"calc(100% - 123px)\"\n  },\n  flex: {\n    flex: 1,\n  },\n  menuButton: {\n    marginLeft: -12,\n    marginRight: 20,\n  },\n});\n\n\nclass App extends Component {\n  render() {\n    const { classes } = this.props\n\n    return (\n      <React.Fragment>\n        <CssBaseline />\n        <AppBar position=\"static\">\n          <Toolbar>\n            <Typography\n              variant=\"title\"\n              color=\"inherit\"\n              className={classes.flex}\n            >\n              <img\n                src={logo}\n                alt=\"BPL logo\"\n                style={{ height: '1.16667em', verticalAlign: 'bottom' }}\n              />\n              <span style={{ marginLeft: '15px' }}>\n                <Link to=\"/\">BPL Delegate Explorer</Link>\n              </span>\n            </Typography>\n\n            <Link to=\"/calculator\">Calculator</Link>\n            <Hidden smDown>\n              <Typography color=\"inherit\" />\n            </Hidden>\n          </Toolbar>\n        </AppBar>\n\n        <div className={classes.content}>\n          <Switch>\n            <Route path=\"/\" exact component={RoundScreen} />\n            <Route path=\"/delegate/:address\" component={DelegateScreen} />\n            <Route path=\"/calculator\" exact component={CalculatorScreen} />\n          </Switch>\n        </div>\n      </React.Fragment>\n    )\n  }\n}\n\nexport default withStyles(styles)(App)\n","import React, { Component } from 'react'\n\nexport default class CalculatorScreen extends Component {\n  render() {\n    return (\n      <div>Calculator Screen</div>\n    )\n  }\n}\n","import React, { Component } from 'react'\n\nexport default class DelegateScreen extends Component {\n  render() {\n    return (\n      <div>Delegate Screen</div>\n    )\n  }\n}\n","import React, { Component } from 'react'\nimport { inject, observer } from 'mobx-react'\nimport { Collapse, List, ListItem, withStyles } from '@material-ui/core'\nimport Avatar from '@material-ui/core/Avatar'\nimport ListItemText from '@material-ui/core/ListItemText'\nimport AnnouncementIcon from '@material-ui/icons/Announcement'\nimport CheckCircle from '@material-ui/icons/CheckCircle'\n\n\nconst styles = theme => ({\n  missedBlockAvatar: {\n    backgroundColor: theme.palette.error.main,\n  },\n  successfulBlockAvatar: {\n    backgroundColor: theme.palette.primary.main,\n  },\n})\n\nconst CompletedSlot = withStyles(styles)(({ hasMissedBlock, ... rest, }) =>\n  hasMissedBlock\n    ? (<CompletedMissedSlot {... rest} />)\n    : (<CompletedForgedSlot {... rest} />)\n)\n\nconst CompletedForgedSlot = ({ classes, name, slot, timestamp, }) =>\n  <React.Fragment>\n    <Avatar className={classes.successfulBlockAvatar}>\n      <CheckCircle />\n    </Avatar>\n    <ListItemText\n      primary={`${slot} - ${name}`}\n      secondary={`Forged at: ${new Date(timestamp).toLocaleString()}`}\n    />\n  </React.Fragment>\n\nconst CompletedMissedSlot = ({ classes, name, slot, timestamp, }) =>\n  <React.Fragment>\n    <Avatar className={classes.missedBlockAvatar}>\n      <AnnouncementIcon />\n    </Avatar>\n    <ListItemText\n      primary={`${slot} - ${name}`}\n      secondary={`Missed block at: ${new Date(timestamp).toLocaleString()}`}\n    />\n  </React.Fragment>\n\nconst CollapsableSlot = inject('slotStore')(observer(({ slotStore, }) =>\n  <Collapse \n    component={ListItem}\n    in={slotStore.slotInProcess.shouldBeVisible}\n    key={slotStore.slotInProcess.slot.slot}\n    timeout={500}\n    onEntered={() => slotStore.slotJoinedCompleted()}\n  >\n    <CompletedSlot {... slotStore.slotInProcess.slot} />\n  </Collapse>\n))\n\n\nclass CompletedSlots extends Component {\n  render() {\n    const { slotStore } = this.props\n    const Incoming = slotStore.hasSlotInProcess && slotStore.slotInProcess.hasLeftUpcoming\n      ? <CollapsableSlot slot={slotStore.slotInProcess.slot} store={slotStore} />\n      : null\n\n    return (\n      <React.Fragment>\n        {slotStore.init.match({\n          pending: () => <div>Loading, please wait..</div>,\n          rejected: (err) => <div>Error: {err.message}</div>,\n          resolved: () => (\n            <List>\n              {Incoming}\n              {slotStore.completedSlots.map(forger =>\n                <ListItem key={forger.slot}>\n                  <CompletedSlot {... forger} />\n                </ListItem>\n              )}\n            </List>\n          )\n        })} \n      </React.Fragment>\n    )\n  }\n}\n\nexport default inject('slotStore')(observer(CompletedSlots))\n","import React, { Component } from 'react'\nimport { Grid } from '@material-ui/core'\n\nimport CompletedSlots from './CompletedSlots'\nimport UpcomingSlots from './UpcomingSlots'\n\nexport default class RoundScreen extends Component {\n  render() {\n    return (\n      <Grid container>\n        <Grid item xs={8}>\n          <UpcomingSlots />\n        </Grid>\n\n        <Grid item xs={4}>\n          <CompletedSlots />\n        </Grid>\n      </Grid>\n    )\n  }\n}\n","import React, { Component } from 'react'\nimport { inject, observer } from 'mobx-react'\nimport { Collapse, List, ListItem, } from '@material-ui/core'\nimport Avatar from '@material-ui/core/Avatar'\nimport ListItemText from '@material-ui/core/ListItemText'\nimport UpdateIcon from '@material-ui/icons/Update'\n\n\nconst UpcomingSlot = ({ slot, name, timestamp }) =>\n  <React.Fragment>\n    <Avatar>\n      <UpdateIcon />\n    </Avatar>\n    <ListItemText\n      primary={`${slot} - ${name}`}\n      secondary={`Expected at: ${new Date(timestamp).toLocaleString()}`}\n    />\n  </React.Fragment>\n\nconst CollapsableSlot = inject('slotStore')(observer(({ slotStore, }) =>\n  <Collapse \n    component={ListItem}\n    in={slotStore.slotInProcess.shouldBeVisible}\n    key={slotStore.slotInProcess.slot.slot}\n    timeout={500}\n    onExited={() => slotStore.slotLeftUpcoming()}\n  >\n    <UpcomingSlot {... slotStore.slotInProcess.slot} />\n  </Collapse>\n))\n\n\nclass UpcomingSlots extends Component {\n  render() {\n    const { slotStore } = this.props\n    const Outgoing = slotStore.hasSlotInProcess && !slotStore.slotInProcess.hasLeftUpcoming\n      ? <CollapsableSlot slot={slotStore.slotInProcess.slot} store={slotStore} />\n      : null\n\n    return (\n      <React.Fragment>\n        {slotStore.init.match({\n          pending: () => <div>Loading, please wait..</div>,\n          rejected: (err) => <div>Error: {err.message}</div>,\n          resolved: () => (\n            <List>\n              {Outgoing}\n              {slotStore.upcomingSlots.concat(slotStore.unprocessedSlots).map(forger =>\n                <ListItem key={forger.slot}>\n                  <UpcomingSlot {... forger} />\n                </ListItem>\n              )}\n            </List>\n          )\n        })} \n      </React.Fragment>\n    )\n  }\n}\n\nexport default inject('slotStore')(observer(UpcomingSlots))\n","import fetch from 'node-fetch'\nimport qs from 'querystring'\n\nconst api = 'https://api.bplforge.com/api'\n\nasync function makeApiRequest(url, params) {\n  return new Promise(async (resolve, reject) => {\n    try {\n      const query = params ? `?${qs.stringify(params)}` : ''\n      const requestUrl = `${api}/${url}${query}`\n\n      const rawResponse = await fetch(requestUrl, {\n        method: 'GET',\n      })\n      const response = await rawResponse.json()\n\n      if (response.success) {\n        resolve(response)\n      } else {\n        console.log(response)\n        reject(new Error(`Request did not complete successfully.`))\n      }\n    } catch (err) {\n      reject(err)\n    }\n  })\n}\n\nexport default class NodeApi {\n  async getActiveDelegates() {\n    return makeApiRequest('delegates', 0, 201)\n    /*\n    return {\n      delegates: [\n        { publicKey: 1, blockRoundSlot: 1, username: 'Delegate 1', },\n        { publicKey: 2, blockRoundSlot: 2, username: 'Delegate 2', },\n        { publicKey: 3, blockRoundSlot: 3, username: 'Delegate 3', },\n        { publicKey: 4, blockRoundSlot: 4, username: 'Delegate 4', },\n        { publicKey: 5, blockRoundSlot: 5, username: 'Delegate 5', },\n      ]\n    }\n    */\n  }\n\n  async getBlocks(offset = 0, limit = 100) {\n    return makeApiRequest('blocks', { limit, offset })\n  }\n\n  async getCurrentRound() {\n    return makeApiRequest('rounds')\n    /*\n    return {\n      delegateActivity: [\n        { publicKey: 1, hasMissedBlock: false, roundSlot: 1, totalForged: '12345668.823422', },\n        { publicKey: 2, hasMissedBlock: true, roundSlot: 2, totalForged: '23424.823422', },\n        { publicKey: 3, hasMissedBlock: false, roundSlot: 3, totalForged: '23893054.823422', },\n      ],\n      expectedForgers: [\n        { publicKey: 4, blockRoundSlot: 4, username: 'Delegate 4', },\n        { publicKey: 5, blockRoundSlot: 5, username: 'Delegate 5', },\n      ],\n    }\n    */\n  }\n\n  async getRewardBlocks(generatorPublicKey) {\n    return makeApiRequest('blocks', { generatorPublicKey })\n  }\n\n  async getTransactions(address) {\n    return makeApiRequest('transactions', {\n      senderId: address,\n      recipientId: address,\n    })\n  }\n\n  async getVoters(publicKey) {\n    return makeApiRequest('delegates/voters', { publicKey })\n  }\n}\n","\nexport function log() {\n  console.log.apply(console, Array.prototype.slice.call(arguments, 0))\n}\n","\nexport const byAscending = prop => (a, b) => a[prop] > b[prop] ? 1 : b[prop] > a[prop] ? -1 : 0\n\nexport const byDescending = prop => (a, b) => a[prop] > b[prop] ? -11 : b[prop] > a[prop] ? 1 : 0\n","const blockInterval = 15 * 1000\nconst epochTimeUtc = Date.UTC(2017, 2, 21, 13, 0, 0, 0)\nconst epochSeconds = Math.floor(epochTimeUtc / 1000)\n\n\nexport const currentMsTimestamp = () =>\n  Date.now()\n\nexport const fromApiToMs = apiTimestamp =>\n  (apiTimestamp + epochSeconds) * 1000\n\nexport function getApiTimestamp() {\n  const currentSeconds = Math.floor(currentMsTimestamp() / 1000)\n\n  return currentSeconds - epochSeconds\n}\n\nexport const nextMsTimestamp = msTimestamp =>\n  msTimestamp + blockInterval\n\nexport function getTimestamp(apiTimestamp) {\n  return (apiTimestamp + epochSeconds) * 1000\n}\n","import { action,\n         computed, \n         decorate,\n         observable,\n         onBecomeObserved,\n         onBecomeUnobserved,\n         when,\n       } from 'mobx'\n\nimport { log } from '../domain/util/logger'\nimport { byAscending } from '../domain/util/sorters'\n\nconst blockInterval = 15 * 1000\n\n\nexport default class BlockStore {\n  blockListener\n  lastProcessedBlockHeight\n  unprocessedBlocks = []\n\n  constructor(nodeApi, roundStore) {\n    this.nodeApi = nodeApi\n    this.roundStore = roundStore\n\n    when(() => this.roundStore.hasNewRound, () => this.init())\n  }\n\n  init() {\n    log('Initializing Block Store.')\n    this.lastProcessedBlockHeight = this.roundStore.initialBlockHeight\n    log(`Block store will load blocks after height ${this.lastProcessedBlockHeight}`)\n\n    onBecomeObserved(this, 'hasNextBlock', this.resume)\n    onBecomeUnobserved(this, 'hasNextBlock', this.suspend)\n  }\n\n  resume = () => {\n    log('Resuming block listener.')\n    this.blockListener = setInterval(() => this.listenForNewBlocks(), blockInterval)\n  }\n\n  async listenForNewBlocks() {\n    const blocks = await this.nodeApi.getBlocks(0, 10)\n    const newBlocks = blocks.blocks.filter(b => b.height > this.lastProcessedBlockHeight)\n    newBlocks.sort(byAscending('height'))\n    \n    const newUnprocessed = this.unprocessedBlocks.concat(newBlocks)\n    log(`There are ${newBlocks.length} new blocks awaiting processing out of ${newUnprocessed.length} total.`)\n\n    this.unprocessedBlocks.replace(newUnprocessed)\n  }\n\n  suspend = () => {\n    log('Suspending block listener.')\n    clearInterval(this.blockListener)\n  }\n\n  get hasNextBlock() {\n    return this.unprocessedBlocks.length > 0\n  }\n\n  nextBlock() {\n    const next = this.unprocessedBlocks.shift()\n    this.lastProcessedBlockHeight = next.height\n    log(`Processing block height ${this.lastProcessedBlockHeight}`)\n    return next\n  }\n}\n\ndecorate(BlockStore, {\n  hasNextBlock: computed,\n  listenForNewBlocks: action,\n  nextBlock: action,\n  unprocessedBlocks: observable,\n})\n","import { action,\n         computed, \n         decorate,\n         observable,\n       } from 'mobx'\n\nimport { log } from '../domain/util/logger'\n\n\nexport default class RoundStore {\n  constructor(nodeApi) {\n    this.nodeApi = nodeApi\n  }\n\n  newRound = null\n\n  get hasNewRound() {\n    return this.newRound !== null\n  }\n\n  async init() {\n    log(`Loading initial current round.`)\n    const currentRound = await this.nodeApi.getCurrentRound()\n    log(`Initial current round loaded.`, currentRound)\n\n    this.newRound = currentRound\n  }\n\n  get initialBlockHeight() {\n    return this.hasNewRound\n      ? this.newRound.delegateActivity.reduce((initialHeight, slot) => {\n            const slotValue = slot.hasMissedBlock ? 0 : 1\n            return initialHeight + slotValue\n          },\n          this.newRound.fromBlock - 1\n        ) \n      : 0\n  }\n}\n\ndecorate(RoundStore, {\n  hasNewRound: computed,\n  init: action,\n  initialBlockHeight: computed,\n  newRound: observable,\n})\n","import { action,\n         computed, \n         decorate,\n         observable,\n         runInAction,\n         when,\n       } from 'mobx'\nimport { task } from 'mobx-task'\n\nimport { log } from '../domain/util/logger'\nimport { currentMsTimestamp, fromApiToMs, nextMsTimestamp } from '../domain/util/time'\nimport { byDescending } from '../domain/util/sorters'\n\n\nexport default class SlotStore {\n  completedSlots = []\n  isAwaitingBlock = true\n  isAwaitingSlot = true\n  slotInProcess = null\n  upcomingSlots = []\n  unprocessedSlots = []\n\n  constructor(nodeApi, blockStore, roundStore) {\n    this.blockStore = blockStore\n    this.nodeApi = nodeApi\n    this.roundStore = roundStore\n  }\n\n  async init() {\n    log('Initializing Slot Store.')\n    const delegates = await this.nodeApi.getActiveDelegates()\n    const delegatesById = delegates.delegates.reduce((all, delegate) => {\n      all[delegate.publicKey] = delegate.username\n      return all\n    }, {})\n\n    await when(() => this.roundStore.hasNewRound)\n\n    const result = getSlotsFromInitialData(this.roundStore.newRound, delegatesById)    \n    this.currentHeight = result.currentHeight\n    this.watchForNextBlock()\n    this.watchForUnprocessedSlot()\n\n    runInAction(() => {\n      this.completedSlots.replace(result.completed)\n      this.upcomingSlots.replace(result.upcoming)\n    }) \n  }\n\n  watchForNextBlock() {\n    when(() => this.isAwaitingBlock && this.blockStore.hasNextBlock, () => this.processReceivedBlock())\n  }\n\n  processReceivedBlock() {\n    this.isAwaitingBlock = false\n    this.watchForNextBlock()\n\n    const nextBlock = this.blockStore.nextBlock()\n    log('Processing next block.', nextBlock)\n\n    const blockSlots = this.upcomingSlots.reduce((all, slot) => {\n      if (all.hasFoundProcessedSlot) {\n        all.upcomingSlots.push(slot)\n      } else {\n        let hasMissedBlock = slot.publicKey !== all.block.generatorPublicKey\n        let blockProps = hasMissedBlock ? {} : {\n          totalForged: all.block.totalForged\n        }\n        all.hasFoundProcessedSlot = !hasMissedBlock\n        all.unprocessedSlots.push({\n          ... slot,\n          hasMissedBlock,\n          ... blockProps,\n        })\n      }\n      return all\n    }, {\n      block: nextBlock,\n      hasFoundProcessedSlot: false,\n      unprocessedSlots: this.unprocessedSlots,\n      upcomingSlots: [],\n    })\n\n    this.unprocessedSlots.replace(blockSlots.unprocessedSlots)\n    this.upcomingSlots.replace(blockSlots.upcomingSlots)\n  }\n\n  watchForUnprocessedSlot() {\n    when(() => this.isAwaitingSlot && this.hasUnprocessedSlots, () => this.processNextSlot())\n  }\n  \n  get hasUnprocessedSlots() {\n    return this.unprocessedSlots.length > 0\n  }\n\n  nextUnprocessedSlot() {\n    return this.unprocessedSlots.shift()\n  }\n\n  processNextSlot() {\n    this.isAwaitingSlot = false\n    this.watchForUnprocessedSlot()\n\n    const nextSlot = this.nextUnprocessedSlot()\n    log('Processing next slot.', nextSlot)\n\n    this.slotInProcess = {\n      hasLeftUpcoming: false,\n      shouldBeVisible: true,\n      slot: nextSlot,\n    }\n\n    setTimeout(() => this.slotInProcess.shouldBeVisible = false, 0)\n  }\n\n  get hasSlotInProcess() {\n    return this.slotInProcess !== null\n  }\n\n  slotJoinedCompleted() {\n    this.isAwaitingSlot = true\n    this.completedSlots.unshift(this.slotInProcess.slot)\n    this.slotInProcess = null\n\n    if (!this.hasUnprocessedSlots) {\n      this.isAwaitingBlock = true\n    }\n  }\n\n  slotLeftUpcoming() {\n    this.slotInProcess.hasLeftUpcoming = true\n\n    setTimeout(() => this.slotInProcess.shouldBeVisible = true, 0)\n  }\n}\n\ndecorate(SlotStore, {\n  completedSlots: observable,\n  hasSlotInProcess: computed,\n  hasUnprocessedSlots: computed,\n  init: task,\n  isAwaitingBlock: observable,\n  isAwaitingSlot: observable,\n  nextUnprocessedSlot: action,\n  processReceivedBlock: action,\n  processNextSlot: action,\n  slotInProcess: observable,\n  slotJoinedCompleted: action,\n  slotLeftUpcoming: action,\n  upcomingSlots: observable,\n  unprocessedSlots: observable,\n})\n\n\nfunction getSlotsFromInitialData(currentRound, delegatesById) {\n  let result = {\n    completed: [],\n    currentHeight: currentRound.fromBlock - 1,\n    round: currentRound.roundNumber,\n    fromBlock: currentRound.fromBlock,\n    lastTimestamp: currentMsTimestamp(),\n    toBlock: currentRound.toBlock,\n    upcoming: [],\n  }\n\n  result = currentRound.delegateActivity.reduce((all, delegate) => {\n    if (delegate.hasMissedBlock) {\n      all.lastTimestamp = nextMsTimestamp(all.lastTimestamp)\n    } else {\n      all.currentHeight = delegate.blockHeight\n      all.lastTimestamp = fromApiToMs(delegate.timestamp)\n    }\n    all.completed.push({\n      name: delegatesById[delegate.publicKey],\n      hasMissedBlock: delegate.hasMissedBlock,\n      publicKey: delegate.publicKey,\n      slot: delegate.roundSlot,\n      timestamp: all.lastTimestamp,\n      totalForged: delegate.totalForged,\n    })\n    return all\n  }, result)\n\n  result = currentRound.expectedForgers.reduce((all, delegate) => {\n    all.lastTimestamp = nextMsTimestamp(all.lastTimestamp)\n    all.upcoming.push({\n      name: delegatesById[delegate.publicKey],\n      publicKey: delegate.publicKey,\n      slot: delegate.blockRoundSlot,\n      timestamp: all.lastTimestamp,\n    })\n    return all\n  }, result)\n\n  result.completed.sort(byDescending('slot'))\n\n  return result\n}","module.exports = require(\"@babel/polyfill\");","module.exports = require(\"@material-ui/core\");","module.exports = require(\"@material-ui/core/Avatar\");","module.exports = require(\"@material-ui/core/ListItemText\");","module.exports = require(\"@material-ui/core/colors/green\");","module.exports = require(\"@material-ui/core/colors/red\");","module.exports = require(\"@material-ui/core/styles\");","module.exports = require(\"@material-ui/icons/Announcement\");","module.exports = require(\"@material-ui/icons/CheckCircle\");","module.exports = require(\"@material-ui/icons/Update\");","module.exports = require(\"cors\");","module.exports = require(\"express\");","module.exports = require(\"fs\");","module.exports = require(\"mobx\");","module.exports = require(\"mobx-react\");","module.exports = require(\"mobx-task\");","module.exports = require(\"node-fetch\");","module.exports = require(\"path\");","module.exports = require(\"querystring\");","module.exports = require(\"react\");","module.exports = require(\"react-dom/server\");","module.exports = require(\"react-jss/lib/JssProvider\");","module.exports = require(\"react-jss/lib/jss\");","module.exports = require(\"react-router-dom\");"],"sourceRoot":""}